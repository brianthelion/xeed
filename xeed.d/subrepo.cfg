[tool.subrepo/build]
cmdstr: docker build \
  -f {tool.subrepo.dockerfile} \
  -t {tool.subrepo.tag} \
  ./

[tool.subrepo]
tag: {xeed.prefix}-subrepo:{xeed.HASH}
dockerfile: {file.subrepo.path}
cmdstr: {xeed.PREFIX} subrepo/build > /dev/null 2>&1 && \
  {xeed.PREFIX} docker run -it \
  -v {xeed.env.PWD}:{xeed.env.PWD} \
  -w {xeed.env.PWD} \
  {tool.subrepo.tag} \
  subrepo {xeed.cli.extra_args}

[file.subrepo]
path: {xeed.cachedir}/{xeed.HASH}/subrepo.df
contents:
  FROM python:latest
  RUN pip install --upgrade pip wheel
  RUN pip install git-subrepo
  RUN apt-get update
  RUN apt-get install git man-db -y
  RUN git config --system --add safe.directory '*'
  RUN groupadd -g {xeed.user.GID} {xeed.user.NAME}
  RUN useradd -u {xeed.user.UID} -g {xeed.user.GID} {xeed.user.NAME}
  USER {xeed.user.NAME}